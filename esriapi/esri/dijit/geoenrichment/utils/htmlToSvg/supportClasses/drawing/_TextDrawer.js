// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/drawing/_TextDrawer",["dojo/_base/lang","../ElementBuilder","../text/TextMeasurer"],function(t,f,u){return{drawText:function(v,a,w){var b=u.getLines(v,a);if(b){var k,l=a.isSpanLike?a.style.cw||b.textWidth:a.style.cw;k="center"===a.style.textAlign?"middle":"right"===a.style.textAlign?"end":"start";var g=[],m=0;b.lines.forEach(function(c,n){var h=30<=a.style.fontSize?6:5,d=0;a.isSpanLike&&"block"!==a.style.display?d=a.style.fontSize-c.lineHeight:
(d=-Math.max(2,Math.round(a.style.fontSize/h)),d-=(c.lineHeight-a.style.fontSize)/2,"middle"===a.style.vAlign&&"table-cell"===a.style.display?d+=(a.style.ch-c.lineHeight*b.lines.length)/2:"bottom"===a.style.vAlign&&"table-cell"===a.style.display&&(d+=a.style.ch-c.lineHeight*b.lines.length));var h=1<b.lines.length&&b.lines.length-1===n,p=0,p="center"===a.style.textAlign?l/2:"right"===a.style.textAlign?l+(h?-a.style.spanFlowEndOffset:0):0===n?a.style.spanFlowStartOffset:0;m+=c.lineHeight;var q={fill:a.style.color,
x:a.box.x+a.style.getPaddings().l+a.style.getBorder().l.width+p,y:a.box.y+a.style.getPaddings().t+(a.isSpanLike?0:a.style.getBorder().t.width)+m+d,style:a.style.getTextStyle(void 0,a.isLink?{"text-decoration":"underline"}:void 0),opacity:a.style.opacity*a.style.colorOpacity,transform:a.style.transform,clipParams:w,"text-anchor":k},e;if("justify"===a.style.textAlign&&c.words){var r=0;c.words.forEach(function(a){var b=t.mixin({},q);b.x+=r;e=f.buildElement("text",b,a.text);g.push(e);r+=a.w+c.wordSpace})}else e=
f.buildElement("text",q,c.text),a.isLink&&(e=f.buildElement("a",{"xlink:href":a.href,target:a.target},e)),g.push(e)});return g}}}});
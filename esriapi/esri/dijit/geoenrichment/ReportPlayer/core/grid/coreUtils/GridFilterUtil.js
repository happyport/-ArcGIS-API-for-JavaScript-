// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil","dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),function(p,r,t,u,v,m,w,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var q={collectStatsForVariables:function(c){var d=0,g=[],k={},x=q._hasBigTitleCell(c)?1:0;c.columns.forEach(function(a,
e){var l,b={alias:null,fieldName:a.field,columnIndex:e,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};c._getOriginalData().forEach(function(f,e){f=m.getRenderedValue(c,f,a);"number"===typeof f.numericValue?(f=f.numericValue,b.min=Math.min(b.min,f),b.max=Math.max(b.max,f),b.decimals=Math.max(b.decimals,w.getPlaces(f)),b.dataArray.push(f),d++,l=!0,k[e]=!0):b.alias=b.alias||e===x&&f.formattedValue});l&&(b.alias=b.alias||p.substitute(h.columnN,[e+1]),g.push(b),b._cIndex=e)});var e={};g.forEach(function(a){(e[a.alias]=
e[a.alias]||[]).push(a)});for(var n in e)1<e[n].length&&e[n].forEach(function(a){a.alias+=" ("+p.substitute(h.columnN,[a._cIndex+1])+")"});g.forEach(function(a){delete a._cIndex});return{filterRanges:g,numVariablesTotal:d,numRowsTotal:Object.keys(k).length}},_hasBigTitleCell:function(c){var d=c.getFieldCells()[0];return m.getColumnSpan(d)===c.columns.length&&!m.getRowSpan(d)},filterGridData:function(c,d){var g=[],k=0,h=0,e={};d.forEach(function(a){e[a.fieldName]=a});c._saveOriginalData();d=u.getSortableDataInfo(c);
c.store.data.forEach(function(a){var d=!0,l;c.columns.forEach(function(b){var f=e[b.field];if(f){var g=m.getRenderedValue(c,a,b);"number"===typeof g.numericValue&&(l=!0,g.numericValue<f.min||g.numericValue>f.max?(delete a.fieldInfos[b.field],delete a[b.field],d=!1):k++)}});d&&(g.push(a),l&&h++)});r.resizeTableJsonToFitHeight({data:{data:g,columns:c.columns}},t.getTableHeight({data:{data:c.store.data}}));if(d&&d.styleInfo){var n=g.slice(d.topData.length);v.setAlternatingColors(n,c.columns,d.styleInfo)}c.store.data=
g;return{numValuesShown:k,numRowsShown:h}}};return q});